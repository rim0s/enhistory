######################################################################################################
# 
######################################################################################################
本来是想解决linux history 记录信息不完整的问题。看到使用HISSIZE等等的几个命令可以定制history，又想解决ssh连接后直接关闭ssh窗口或终端程序导致的命令没能成功记录。后来又想区分连接的终端，发现需要考虑的事情还挺多。刚好AI已经非常高效了，就使用它写了一些功能。上传的代码都是AI写的。
2026年1月1日到3日的元旦假期，我发现AI的编码能力，理解能力，逻辑思维，推理能力已经强得离谱。于是对这个之前没有完成的工作进行追问。AI给我了一个开源项目地址，仅仅看到介绍我就知道这可能就是我要找的东西。所以如果没有特殊情况我就不对这个项目进行后续的工作了。有跟我有同样问题的，也想解决这些问题的，可以去看看。我写的东西乱糟糟，为了区分，我把这个非常好的项目信息单独列出，推荐去看看，真的非常棒。


######################################################################################################
# 下面就是这个非常优秀的项目的一些信息，建议去研究这个。
######################################################################################################
# Atuin
# 类似 shell history 的搜索引擎
# https://github.com/ellie/atuin
# 特性：
# - 同步加密的 shell history
# - 全文搜索
# - 跨会话、跨机器
# - 记录时间、退出码、工作目录、主机名
# - SQLite 存储

# 安装
curl --proto '=https' --tlsv1.2 -sSf https://setup.atuin.sh | bash


######################################################################################################
# 下面的是我这个项目的一些信息，其实已经不重要了。去看我上面列出的哪个项目吧。
######################################################################################################
下面的信息中对于linux发行版系统和其默认程序的行为都是我的主观看法，并没有去看linux的这些工具的源码和程序代码。
V3 版本已经实现了主要记录功能。已测试稳定可用。由于操作系统关机重启等一些行为的级别非常高，此类操作导致的关机、重启前的一条或若干条命令记录无法第一时间记录到正式记录文件中，而是在再次进入系统后再由临时文件取出记录，导致产生的时间为当前时间而非命令执行当时的时间。该问题为系统机制问题，无法完美解决。仅可通过分析系统日志或其他可靠线索后主动修正记录时间，这通常会导致记录错乱。分析过程本身就是根据条件的相关性对记录进行的推测，因此放弃修正。除明确说明修正了该问题外，后续将不会对此问题进行修正。
V4 版本对记录查看进行了扩充，重新梳理了一下脚本内容。将功能和部署文档重新进行了划分。
V5 版本为转录数据库作准备。文本记录计划作为缓存，目标为及时记录。规划后续版本加入“闲时对记录转写到部署的数据库中的功能”。1.解决同一操作人员使用一个以上用户互相切换进行的操作记录流水。2.为历史命令的复杂查找定位提供底层支持。本版本测试功能可用后将不再扩充功能，新功能模块的引入将以此版本为基础新开版本号实现。确保有一个干净的可供扩充的基础版本。因数据库操作可能会成为程序性能瓶颈甚至导致可用性降低到0,必要时可能会考虑使用C++开发数据库中间件用于日志内容记录到数据库中，并提供数据库查询语句的防注入检测和加密解密功能。当然这是下策。
